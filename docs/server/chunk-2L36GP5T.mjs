import './polyfills.server.mjs';
import{B as l,Oa as h,a as b,cb as p,h as m,k as c}from"./chunk-PC6AFUGU.mjs";var n=class o{_path;_qryParams;_name;_data;constructor(t,s,r,i){t!==void 0?t instanceof o?(this._path=t._path,this._qryParams=t._qryParams,this._name=t._name,this._data=t._data):typeof t!="string"?(this._path=t.path,this._qryParams=t.qryParams,this._name=t.name,this._data=t.data):typeof s=="string"?(this._path=t?.trim()||"",this._qryParams=void 0,this._name=s?.trim()||"",this._data=r!==void 0?r:void 0):(this._path=t?.trim()||"",this._qryParams=s||void 0,this._name=r?.trim()||"",this._data=i!==void 0?r:void 0):(this._path="",this._qryParams=void 0,this._name="",this._data=null)}get path(){return this._path}get qryParams(){return this._qryParams}get name(){return this._name}get data(){return this._data}set path(t){this._path=t}set qryParams(t){this._qryParams=t}set name(t){this._name=t}set data(t){this._data=t}get tabCache(){return{name:this._name,qryParams:this._qryParams,path:this._path,data:this._data}}};var y=class o{constructor(t,s){this._platformId=t;this._router=s;this.tabsUpdates$=new b}_tabsItemKey="dsc8-content-tabs-cache";tabsUpdates$;ngOnDestroy(){}addTab(t,s=!0){if(!h(this._platformId))return[];let r=localStorage.getItem(this._tabsItemKey),i=r?JSON.parse(r)?.filter(a=>a)?.map(a=>new n(a))?.filter(a=>a):[];if(i.filter(a=>a.path===t.path).length)return s?this.editTab(t):i;let e=i;return e.push(t),localStorage.setItem(this._tabsItemKey,JSON.stringify(e.map(a=>a.tabCache))),this.tabsUpdates$.next(e),e}editTab(t){if(!h(this._platformId))return[];let s=localStorage.getItem(this._tabsItemKey),r=s?JSON.parse(s)?.filter(a=>a)?.map(a=>new n(a))?.filter(a=>a):[],i=r.map((a,f)=>a.path===t.path?f:null).filter(a=>a!==null)[0];if(!i&&i!==0)return r;let e=r;return e[i]=t,localStorage.setItem(this._tabsItemKey,JSON.stringify(e.map(a=>a.tabCache))),this.tabsUpdates$.next(e),e}getTabs(){if(!h(this._platformId))return[];let t=localStorage.getItem(this._tabsItemKey);return t?JSON.parse(t)?.filter(r=>r)?.map(r=>new n(r))?.filter(r=>r):[]}getTabByPath(t){if(!h(this._platformId))return new n;let s=localStorage.getItem(this._tabsItemKey),r=s?JSON.parse(s)?.filter(e=>e)?.map(e=>new n(e))?.filter(e=>e):[],i=typeof t=="string"?t:t.root.children.primary.segments.map(e=>e.path).join("/");return r.filter(e=>e.path===i)?.[0]||new n}removeTab(t){if(!h(this._platformId))return[];let s=localStorage.getItem(this._tabsItemKey),r=s?JSON.parse(s)?.filter(a=>a)?.map(a=>new n(a))?.filter(a=>a):[];if(!r.filter(a=>a.path===t.path).length)return r;let i=r.findIndex(a=>JSON.stringify(a)===JSON.stringify(t)),e=r.filter(a=>a.path!==t.path);if(localStorage.setItem(this._tabsItemKey,JSON.stringify(e.map(a=>a.tabCache))),!r.length)this._router.navigateByUrl("/tab");else{let a=i>=e.length?e[i-1]:e[i];this.redirectToTab(a)}return this.tabsUpdates$.next(e),e}redirectToTab(t){this._router.navigateByUrl("/",{skipLocationChange:!0}).then(()=>{this._router.navigate([t.path],{queryParams:t.qryParams})})}static \u0275fac=function(s){return new(s||o)(c(l),c(p))};static \u0275prov=m({token:o,factory:o.\u0275fac,providedIn:"root"})};export{n as a,y as b};
