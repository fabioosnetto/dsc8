import{$ as Ue,B as de,C as k,D as R,F as M,H as We,I as C,J as _,L,M as G,N as he,O as N,P as w,U as T,V as te,X as z,Y as q,Z as K,_ as ne,a as b,b as V,c as E,d as U,da as ke,e as Ne,ea as pe,f as He,fa as ze,g as Re,ga as ge,ha as J,i as O,ia as Ae,j as be,k as Me,ka as qe,l as Z,la as Ke,n as Le,na as Je,o as we,p as x,q as Ge,r as I,s as B,t as ce,u as ue,v as j,x as v,y as F,z as ee}from"./chunk-JENCYQEX.js";var W=class s{constructor(e){if(e){if(e instanceof s)for(let i in e)Object.prototype.hasOwnProperty.call(e,i)&&(this[i]=e[i]);else if(Array.isArray(e))for(let i of e)for(let t in i){if(!Object.hasOwn(i,t))continue;let r=t.split(".").slice(0,-1).join(""),n=t;this[r]||(this[r]={}),this[r][n]={content:i[t].content}}}}static fileListToFileGroup(e){return E(this,null,function*(){let i=new FileReader,t=new s;for(let r in e){if(!Object.hasOwn(e,r))continue;let n=e[r].name.split(".").slice(0,-1).join(""),d=e[r].name,c=String(yield new Promise(u=>{i.onload=a=>u(a.target?.result),i.readAsText(e[r])}));t[n]||(t[n]={}),t[n][d]={content:c}}return t})}};var D=class s{constructor(e){if(e){if(e instanceof s)for(let i in e)Object.prototype.hasOwnProperty.call(e,i)&&(this[i]=e[i]);else if(Array.isArray(e))for(let i of e)this[i.name]={content:i.content}}}};var it=(()=>{let e=class e{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=n=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}};e.\u0275fac=function(r){return new(r||e)(F(ee),F(j))},e.\u0275dir=x({type:e});let s=e;return s})(),xe=(()=>{let e=class e extends it{};e.\u0275fac=(()=>{let t;return function(n){return(t||(t=ce(e)))(n||e)}})(),e.\u0275dir=x({type:e,features:[k]});let s=e;return s})(),ve=new Z("");var St={provide:ve,useExisting:O(()=>Ce),multi:!0};function Ft(){let s=Ae()?Ae().getUserAgent():"";return/android (\d+)/.test(s.toLowerCase())}var Tt=new Z(""),Ce=(()=>{let e=class e extends it{constructor(t,r,n){super(t,r),this._compositionMode=n,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!Ft())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}};e.\u0275fac=function(r){return new(r||e)(F(ee),F(j),F(Tt,8))},e.\u0275dir=x({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,n){r&1&&N("input",function(c){return n._handleInput(c.target.value)})("blur",function(){return n.onTouched()})("compositionstart",function(){return n._compositionStart()})("compositionend",function(c){return n._compositionEnd(c.target.value)})},features:[ne([St]),k]});let s=e;return s})();var Pt=new Z(""),bt=new Z("");function rt(s){return s!=null}function st(s){return ke(s)?Ne(s):s}function ot(s){let e={};return s.forEach(i=>{e=i!=null?b(b({},e),i):e}),Object.keys(e).length===0?null:e}function at(s,e){return e.map(i=>i(s))}function Mt(s){return!s.validate}function lt(s){return s.map(e=>Mt(e)?e:i=>e.validate(i))}function wt(s){if(!s)return null;let e=s.filter(rt);return e.length==0?null:function(i){return ot(at(i,e))}}function ct(s){return s!=null?wt(lt(s)):null}function At(s){if(!s)return null;let e=s.filter(rt);return e.length==0?null:function(i){let t=at(i,e).map(st);return Re(t).pipe(He(ot))}}function ut(s){return s!=null?At(lt(s)):null}function Ze(s,e){return s===null?[e]:Array.isArray(s)?[...s,e]:[s,e]}function Dt(s){return s._rawValidators}function $t(s){return s._rawAsyncValidators}function De(s){return s?Array.isArray(s)?s:[s]:[]}function me(s,e){return Array.isArray(s)?s.includes(e):s===e}function Xe(s,e){let i=De(e);return De(s).forEach(r=>{me(i,r)||i.push(r)}),i}function Ye(s,e){return De(e).filter(i=>!me(s,i))}var ye=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=ct(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=ut(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,i){return this.control?this.control.hasError(e,i):!1}getError(e,i){return this.control?this.control.getError(e,i):null}},$e=class extends ye{get formDirective(){return null}get path(){return null}},ae=class extends ye{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Ve=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},Vt={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Vn=V(b({},Vt),{"[class.ng-submitted]":"isSubmitted"}),dt=(()=>{let e=class e extends Ve{constructor(t){super(t)}};e.\u0275fac=function(r){return new(r||e)(F(ae,2))},e.\u0275dir=x({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,n){r&2&&We("ng-untouched",n.isUntouched)("ng-touched",n.isTouched)("ng-pristine",n.isPristine)("ng-dirty",n.isDirty)("ng-valid",n.isValid)("ng-invalid",n.isInvalid)("ng-pending",n.isPending)},features:[k]});let s=e;return s})();var ie="VALID",fe="INVALID",X="PENDING",re="DISABLED",Q=class{},_e=class extends Q{constructor(e,i){super(),this.value=e,this.source=i}},se=class extends Q{constructor(e,i){super(),this.pristine=e,this.source=i}},oe=class extends Q{constructor(e,i){super(),this.touched=e,this.source=i}},Y=class extends Q{constructor(e,i){super(),this.status=e,this.source=i}};function Et(s){return(Se(s)?s.validators:s)||null}function xt(s){return Array.isArray(s)?ct(s):s||null}function It(s,e){return(Se(e)?e.asyncValidators:s)||null}function Bt(s){return Array.isArray(s)?ut(s):s||null}function Se(s){return s!=null&&!Array.isArray(s)&&typeof s=="object"}var Ee=class{constructor(e,i){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=ge(()=>this.statusReactive()),this.statusReactive=de(void 0),this._pristine=ge(()=>this.pristineReactive()),this.pristineReactive=de(!0),this._touched=ge(()=>this.touchedReactive()),this.touchedReactive=de(!1),this._events=new U,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(i)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return J(this.statusReactive)}set status(e){J(()=>this.statusReactive.set(e))}get valid(){return this.status===ie}get invalid(){return this.status===fe}get pending(){return this.status==X}get disabled(){return this.status===re}get enabled(){return this.status!==re}get pristine(){return J(this.pristineReactive)}set pristine(e){J(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return J(this.touchedReactive)}set touched(e){J(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Xe(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Xe(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Ye(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Ye(e,this._rawAsyncValidators))}hasValidator(e){return me(this._rawValidators,e)}hasAsyncValidator(e){return me(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let i=this.touched===!1;this.touched=!0;let t=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(V(b({},e),{sourceControl:t})),i&&e.emitEvent!==!1&&this._events.next(new oe(!0,t))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(i=>i.markAllAsTouched(e))}markAsUntouched(e={}){let i=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let t=e.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:t})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t),i&&e.emitEvent!==!1&&this._events.next(new oe(!1,t))}markAsDirty(e={}){let i=this.pristine===!0;this.pristine=!1;let t=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(V(b({},e),{sourceControl:t})),i&&e.emitEvent!==!1&&this._events.next(new se(!1,t))}markAsPristine(e={}){let i=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let t=e.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&e.emitEvent!==!1&&this._events.next(new se(!0,t))}markAsPending(e={}){this.status=X;let i=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Y(this.status,i)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(V(b({},e),{sourceControl:i}))}disable(e={}){let i=this._parentMarkedDirty(e.onlySelf);this.status=re,this.errors=null,this._forEachChild(r=>{r.disable(V(b({},e),{onlySelf:!0}))}),this._updateValue();let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new _e(this.value,t)),this._events.next(new Y(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(V(b({},e),{skipPristineCheck:i}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let i=this._parentMarkedDirty(e.onlySelf);this.status=ie,this._forEachChild(t=>{t.enable(V(b({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(V(b({},e),{skipPristineCheck:i}),this),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(e,i){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},i),this._parent._updateTouched({},i))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let t=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===ie||this.status===X)&&this._runAsyncValidator(t,e.emitEvent)}let i=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new _e(this.value,i)),this._events.next(new Y(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(V(b({},e),{sourceControl:i}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(i=>i._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?re:ie}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,i){if(this.asyncValidator){this.status=X,this._hasOwnPendingAsyncValidator={emitEvent:i!==!1};let t=st(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:i,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,i={}){this.errors=e,this._updateControlsErrors(i.emitEvent!==!1,this,i.shouldHaveEmitted)}get(e){let i=e;return i==null||(Array.isArray(i)||(i=i.split(".")),i.length===0)?null:i.reduce((t,r)=>t&&t._find(r),this)}getError(e,i){let t=i?this.get(i):this;return t&&t.errors?t.errors[e]:null}hasError(e,i){return!!this.getError(e,i)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,i,t){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||t)&&this._events.next(new Y(this.status,i)),this._parent&&this._parent._updateControlsErrors(e,i,t)}_initObservables(){this.valueChanges=new ue,this.statusChanges=new ue}_calculateStatus(){return this._allControlsDisabled()?re:this.errors?fe:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(X)?X:this._anyControlsHaveStatus(fe)?fe:ie}_anyControlsHaveStatus(e){return this._anyControls(i=>i.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,i){let t=!this._anyControlsDirty(),r=this.pristine!==t;this.pristine=t,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,i),r&&this._events.next(new se(this.pristine,i))}_updateTouched(e={},i){this.touched=this._anyControlsTouched(),this._events.next(new oe(this.touched,i)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,i)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Se(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let i=this._parent&&this._parent.dirty;return!e&&!!i&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=xt(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=Bt(this._rawAsyncValidators)}};var ht=new Z("CallSetDisabledState",{providedIn:"root",factory:()=>Ie}),Ie="always";function Nt(s,e){return[...e.path,s]}function Ht(s,e,i=Ie){Lt(s,e),e.valueAccessor.writeValue(s.value),(s.disabled||i==="always")&&e.valueAccessor.setDisabledState?.(s.disabled),Gt(s,e),Ut(s,e),Wt(s,e),Rt(s,e)}function Qe(s,e){s.forEach(i=>{i.registerOnValidatorChange&&i.registerOnValidatorChange(e)})}function Rt(s,e){if(e.valueAccessor.setDisabledState){let i=t=>{e.valueAccessor.setDisabledState(t)};s.registerOnDisabledChange(i),e._registerOnDestroy(()=>{s._unregisterOnDisabledChange(i)})}}function Lt(s,e){let i=Dt(s);e.validator!==null?s.setValidators(Ze(i,e.validator)):typeof i=="function"&&s.setValidators([i]);let t=$t(s);e.asyncValidator!==null?s.setAsyncValidators(Ze(t,e.asyncValidator)):typeof t=="function"&&s.setAsyncValidators([t]);let r=()=>s.updateValueAndValidity();Qe(e._rawValidators,r),Qe(e._rawAsyncValidators,r)}function Gt(s,e){e.valueAccessor.registerOnChange(i=>{s._pendingValue=i,s._pendingChange=!0,s._pendingDirty=!0,s.updateOn==="change"&&pt(s,e)})}function Wt(s,e){e.valueAccessor.registerOnTouched(()=>{s._pendingTouched=!0,s.updateOn==="blur"&&s._pendingChange&&pt(s,e),s.updateOn!=="submit"&&s.markAsTouched()})}function pt(s,e){s._pendingDirty&&s.markAsDirty(),s.setValue(s._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(s._pendingValue),s._pendingChange=!1}function Ut(s,e){let i=(t,r)=>{e.valueAccessor.writeValue(t),r&&e.viewToModelUpdate(t)};s.registerOnChange(i),e._registerOnDestroy(()=>{s._unregisterOnChange(i)})}function kt(s,e){if(!s.hasOwnProperty("model"))return!1;let i=s.model;return i.isFirstChange()?!0:!Object.is(e,i.currentValue)}function zt(s){return Object.getPrototypeOf(s.constructor)===xe}function qt(s,e){if(!e)return null;Array.isArray(e);let i,t,r;return e.forEach(n=>{n.constructor===Ce?i=n:zt(n)?t=n:r=n}),r||t||i||null}function Oe(s,e){let i=s.indexOf(e);i>-1&&s.splice(i,1)}function je(s){return typeof s=="object"&&s!==null&&Object.keys(s).length===2&&"value"in s&&"disabled"in s}var Kt=class extends Ee{constructor(e=null,i,t){super(Et(i),It(t,i)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(i),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Se(i)&&(i.nonNullable||i.initialValueIsDefault)&&(je(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,i={}){this.value=this._pendingValue=e,this._onChange.length&&i.emitModelToViewChange!==!1&&this._onChange.forEach(t=>t(this.value,i.emitViewToModelChange!==!1)),this.updateValueAndValidity(i)}patchValue(e,i={}){this.setValue(e,i)}reset(e=this.defaultValue,i={}){this._applyFormState(e),this.markAsPristine(i),this.markAsUntouched(i),this.setValue(this.value,i),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Oe(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Oe(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){je(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var Jt={provide:ae,useExisting:O(()=>Be)},et=Promise.resolve(),Be=(()=>{let e=class e extends ae{constructor(t,r,n,d,c,u){super(),this._changeDetectorRef=c,this.callSetDisabledState=u,this.control=new Kt,this._registered=!1,this.name="",this.update=new ue,this._parent=t,this._setValidators(r),this._setAsyncValidators(n),this.valueAccessor=qt(this,d)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),kt(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Ht(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){et.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,n=r!==0&&ze(r);et.then(()=>{n&&!this.control.disabled?this.control.disable():!n&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?Nt(t,this._parent):[t]}};e.\u0275fac=function(r){return new(r||e)(F($e,9),F(Pt,10),F(bt,10),F(ve,10),F(pe,8),F(ht,8))},e.\u0275dir=x({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[ne([Jt]),k,Ge]});let s=e;return s})();var Zt={provide:ve,useExisting:O(()=>Fe),multi:!0};function gt(s,e){return s==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${s}: ${e}`.slice(0,50))}function Xt(s){return s.split(":")[0]}var Fe=(()=>{let e=class e extends xe{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let r=this._getOptionId(t),n=gt(r,t);this.setProperty("value",n)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=Xt(t);return this._optionMap.has(r)?this._optionMap.get(r):t}};e.\u0275fac=(()=>{let t;return function(n){return(t||(t=ce(e)))(n||e)}})(),e.\u0275dir=x({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,n){r&1&&N("change",function(c){return n.onChange(c.target.value)})("blur",function(){return n.onTouched()})},inputs:{compareWith:"compareWith"},features:[ne([Zt]),k]});let s=e;return s})(),ft=(()=>{let e=class e{constructor(t,r,n){this._element=t,this._renderer=r,this._select=n,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(gt(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(r){return new(r||e)(F(j),F(ee),F(Fe,9))},e.\u0275dir=x({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let s=e;return s})(),Yt={provide:ve,useExisting:O(()=>mt),multi:!0};function tt(s,e){return s==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${s}: ${e}`.slice(0,50))}function Qt(s){return s.split(":")[0]}var mt=(()=>{let e=class e extends xe{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let r;if(Array.isArray(t)){let n=t.map(d=>this._getOptionId(d));r=(d,c)=>{d._setSelected(n.indexOf(c.toString())>-1)}}else r=(n,d)=>{n._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let n=[],d=r.selectedOptions;if(d!==void 0){let c=d;for(let u=0;u<c.length;u++){let a=c[u],o=this._getOptionValue(a.value);n.push(o)}}else{let c=r.options;for(let u=0;u<c.length;u++){let a=c[u];if(a.selected){let o=this._getOptionValue(a.value);n.push(o)}}}this.value=n,t(n)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=Qt(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}};e.\u0275fac=(()=>{let t;return function(n){return(t||(t=ce(e)))(n||e)}})(),e.\u0275dir=x({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,n){r&1&&N("change",function(c){return n.onChange(c.target)})("blur",function(){return n.onTouched()})},inputs:{compareWith:"compareWith"},features:[ne([Yt]),k]});let s=e;return s})(),yt=(()=>{let e=class e{constructor(t,r,n){this._element=t,this._renderer=r,this._select=n,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(tt(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(tt(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(r){return new(r||e)(F(j),F(ee),F(mt,9))},e.\u0275dir=x({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let s=e;return s})();var Ot=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=we({type:e}),e.\u0275inj=Me({});let s=e;return s})();var _t=(()=>{let e=class e{static withConfig(t){return{ngModule:e,providers:[{provide:ht,useValue:t.callSetDisabledState??Ie}]}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=we({type:e}),e.\u0275inj=Me({imports:[Ot]});let s=e;return s})();function en(s,e){if(s&1&&(L(0),C(1,"option",9),T(2),_(),G()),s&2){let i=e.$implicit;v(),M("ngValue",i),v(),te(i.name)}}function tn(s,e){if(s&1&&(L(0),C(1,"optgroup",8),R(2,en,3,2,"ng-container",6),_(),G()),s&2){let i=e.$implicit;v(),M("label",i.parent),v(),M("ngForOf",i.children)}}function nn(s,e){if(s&1){let i=he();L(0),C(1,"li",11)(2,"label",21),T(3,"Caption"),_(),C(4,"input",22),K("ngModelChange",function(r){I(i);let n=w(2);return q(n.selectedObject.caption,r)||(n.selectedObject.caption=r),B(r)}),_()(),G()}if(s&2){let i=w(2);v(4),z("ngModel",i.selectedObject.caption)}}function rn(s,e){if(s&1&&(L(0),C(1,"option",9),T(2),_(),G()),s&2){let i=e.$implicit;v(),M("ngValue",i),v(),te(i)}}function sn(s,e){if(s&1&&(L(0),C(1,"option",9),T(2),_(),G()),s&2){let i=e.$implicit;v(),M("ngValue",i),v(),te(i.name)}}function on(s,e){if(s&1){let i=he();L(0),C(1,"li",11)(2,"label",23),T(3,"Width"),_(),C(4,"select",24),K("ngModelChange",function(r){I(i);let n=w(2);return q(n.selectedObject.width,r)||(n.selectedObject.width=r),B(r)}),N("change",function(){I(i);let r=w(2);return B(r.onWidthChage())}),C(5,"option",18),T(6,"Default width"),_(),R(7,sn,3,2,"ng-container",6),_()(),G()}if(s&2){let i=w(2);v(4),z("ngModel",i.selectedObject.width),v(3),M("ngForOf",i.sizes)}}function an(s,e){if(s&1){let i=he();L(0),C(1,"ul",10)(2,"li",11)(3,"label",12),T(4,"Parent"),_(),C(5,"input",13),K("ngModelChange",function(r){I(i);let n=w();return q(n.selectedObject.parent,r)||(n.selectedObject.parent=r),B(r)}),_()(),C(6,"li",11)(7,"label",14),T(8),_(),C(9,"input",15),K("ngModelChange",function(r){I(i);let n=w();return q(n.selectedObject.class,r)||(n.selectedObject.class=r),B(r)}),_()(),R(10,nn,5,1,"ng-container",7),C(11,"li",11)(12,"label",16),T(13,"Order"),_(),C(14,"select",17),K("ngModelChange",function(r){I(i);let n=w();return q(n.selectedObject.order,r)||(n.selectedObject.order=r),B(r)}),N("change",function(){I(i);let r=w();return B(r.onOrderChange())}),C(15,"option",18),T(16,"Default order"),_(),R(17,rn,3,2,"ng-container",6),_()(),R(18,on,8,2,"ng-container",7),_(),C(19,"div",19)(20,"button",20),N("click",function(){I(i);let r=w();return B(r.prevObject())}),T(21,"<"),_(),C(22,"button",20),N("click",function(){I(i);let r=w();return B(r.nextObject())}),T(23,">"),_()(),G()}if(s&2){let i=w();v(5),z("ngModel",i.selectedObject.parent),v(3),te(i.selectedObject.name),v(),z("ngModel",i.selectedObject.class),v(),M("ngIf",i.isLabel(i.selectedObject.class)||i.isButton(i.selectedObject.class)),v(4),z("ngModel",i.selectedObject.order),v(3),M("ngForOf",i.orders),v(),M("ngIf",!i.isButton(i.selectedObject.class))}}var Te=class s{constructor(e){this._cdr=e;this.dfm_js$=new U,this._dfm_js=null,this.dfm_js$.subscribe(i=>{this._dfm_js=i,this.objects=this._getObjects(this._dfm_js),this._cdr.detectChanges()}),this.objects=new Array,this.selectedObject=null,this.orders=new Array,this.sizes=this._getSizes()}dfm_js$;_dfm_js;objects;selectedObject;orders;sizes;ngOnInit(){}ngOnDestroy(){this.dfm_js$.unsubscribe()}selectedObjectCompareFn(e,i){return e&&i?e.name===i.name:e===i}onSelectedObjectChange(){if(this.orders=new Array,!this.selectedObject)return;let{parent:e,child:i}=this._getObjectByPath(this.selectedObject.path),t=this._getObjectByPath(this.selectedObject.path.slice(0,-1)).parent;this.orders=this._getOrdersByObjectType(this.isButton(this.selectedObject.class)?t:e,i)}onOrderChange(){this._updateSelObjProperties()}onWidthChage(){this._updateSelObjProperties()}_updateSelObjProperties(){if(!this.selectedObject)return;let e=(r,n)=>{let d=n!=="button"?50:28,c=n==="label"?10:n==="field"?27:6,u=0,a=1;Object.keys(r).filter(o=>r[o]._objectClass&&r[o]._order&&(n==="label"&&this.isLabel(r[o]._objectClass)||n==="field"&&this.isField(r[o]._objectClass)||n==="button"&&this.isButtonPanel(r[o]))).sort((o,l)=>r[o]._order-r[l]._order).forEach((o,l)=>{u+Number(r[o].Width)+30>=910&&(a++,u=0),r[o].Top=`${((a-1)*d+c).toFixed()}`,r[o].Left=`${40+u}`,u+=Number(r[o].Width)+10})},i=(r,n)=>{if(!(!this.selectedObject||!t)){for(let d in r)if(Object.prototype.hasOwnProperty.call(r,d))if(d===this.selectedObject.path[n]&&r[d]._objectClass&&i(r[d],n+1),n===this.selectedObject.path.length){this.selectedObject.order>-1?(r._order=`${this.selectedObject.order}`,!this.isLabel(this.selectedObject.class)&&!this.isButton(this.selectedObject.class)&&(r.TabOrder=`${this.selectedObject.order-1}`)):(r._order=t.order>-1?`${t.order}`:null,!this.isLabel(this.selectedObject.class)&&!this.isButton(this.selectedObject.class)&&(r.TabOrder=t.order>-1?`${t.order}`:null)),this.isButton(this.selectedObject.class)?this.selectedObject.order===1&&(r.Font.Color="clWhite"):typeof this.selectedObject.width!="number"&&(r.Width=`${this.selectedObject.width.value}`);break}else n===this.selectedObject.path.length-1?this.isButton(this.selectedObject.class)?(this.selectedObject.order>0&&(r._order=`${this.selectedObject.order}`,r.TabOrder=`${this.selectedObject.order-1}`),this.selectedObject.order===1&&(r.Color="6766380",r.Font.Color="clWhite")):(e(r,"label"),e(r,"field")):n===this.selectedObject.path.length-2&&this.isButton(this.selectedObject.class)&&e(r,"button")}},t=this._getDefaultObject();i(this._dfm_js,0),this.dfm_js$.next(this._dfm_js)}_getOrdersByObjectType(e,i){let t=Object.keys(e).filter(r=>e[r]._objectClass&&(this.isLabel(e[r]._objectClass)&&this.isLabel(i._objectClass)||this.isField(e[r]._objectClass)&&this.isField(i._objectClass)||this.isButtonPanel(e[r])&&this.isButton(i._objectClass)));return Array.from({length:t.length},(r,n)=>n+1)}_getSizes(){return[{id:0,name:"col-12 | 100%",value:810},{id:1,name:"col-6 | 50%",value:400},{id:2,name:"col-4 | 33.337%",value:263},{id:3,name:"col-3 | 25%",value:195},{id:4,name:"col-2 | 16.667%",value:126}]}isLabel(e){return["TLabel"].includes(e)}isField(e){return["TEdit","TMSEdit","TMSEditSel","TComboBox","TMaskEdit","TMSDateEdit","TDBText","TDBEdit","TDBMemo","TMSDBEditNum","TMSDBFind","TMSEditFind","TMSFindIncZ","TDBCheckBox"].includes(e)}isButton(e){return["TButton","TBitBtn","TDBSpeedButton","TSpeedButton","TMSButton"].includes(e)}isButtonPanel(e){return this.isButton(e[Object.keys(e).filter(i=>e[i]._objectClass)[0]]?._objectClass)}_getObjects(e){let i=(r,n,d,c=[])=>{let u=[];for(let a in r){if(!r[a]||!r[a]._objectClass||(u=u.concat(i(r[a],a,n,c.concat([a])).flatMap(l=>l.children)),!this.isLabel(r[a]._objectClass)&&!this.isField(r[a]._objectClass)&&!this.isButton(r[a]._objectClass)||n==="PanelTitle"))continue;let o=this.isButton(r[a]._objectClass)?d||"":n||"";u.push({name:a,class:r[a]._objectClass,path:c.concat(a)||[],parent:o,caption:r[a].Caption||"",order:r[a]._order&&!isNaN(r[a]._order)?Number(r[a]._order):-1,width:this.sizes.filter(l=>l.value===Number(r[a].Width))[0]||-1})}return t(u)},t=r=>r.reduce((n,d)=>{let c=n.find(u=>u.parent===d.parent);return c||(c={parent:d.parent,children:[]},n.push(c)),c.children.push(d),n},[]);return i(e)}_getObjectByPath(e){let i=this._dfm_js,t=i;for(let[r,n]of e.entries()){if(!i[n]){i=null;break}i=i[n],r===e.length-2&&(t=i)}return{parent:t,child:i}}_getDefaultObject(){for(let[e,i]of this.objects.entries())for(let[t,r]of i.children.entries())if(this.selectedObject?.name===r.name)return r;return null}prevObject(){for(let[e,i]of this.objects.entries())for(let[t,r]of i.children.entries())if(this.selectedObject?.name===r.name){t>0?this.selectedObject=this.objects[e].children[t-1]:e>0?this.selectedObject=this.objects[e-1].children[this.objects[e-1].children.length-1]:this.selectedObject=this.objects[this.objects.length-1].children[this.objects[this.objects.length-1].children.length-1],this.onSelectedObjectChange();return}}nextObject(){for(let[e,i]of this.objects.entries())for(let[t,r]of i.children.entries())if(this.selectedObject?.name===r.name){t<i.children.length-1?this.selectedObject=this.objects[e].children[t+1]:e<this.objects.length-1?this.selectedObject=this.objects[e+1].children[0]:this.selectedObject=this.objects[0].children[0],this.onSelectedObjectChange();return}}static \u0275fac=function(i){return new(i||s)(F(pe))};static \u0275cmp=Le({type:s,selectors:[["app-converter"]],inputs:{dfm_js$:[0,"fileGroup","dfm_js$"]},standalone:!0,features:[Ue],decls:10,vars:5,consts:[["id","converter-container",1,"bg-dark","p-2"],[1,"header"],[1,"p-2"],["id","obj-selection-container",1,"w-100","mb-3"],["id","object-selection",1,"form-select","p-1",3,"ngModelChange","change","compareWith","ngModel"],["selected","","disabled","",3,"value"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"label"],[3,"ngValue"],[1,"list-unstyled","w-100"],[1,"convert-item"],["for","object-parent",1,"convert-label","h-100","w-50","ps-2","d-flex","align-items-center"],["id","object-parent","type","text","disabled","",1,"convert-control","h-100","w-50","ps-2",3,"ngModelChange","ngModel"],["for","object-name-class",1,"convert-label","h-100","w-50","ps-2","d-flex","align-items-center"],["id","object-name-class","type","text","disabled","",1,"convert-control","h-100","w-50","ps-2",3,"ngModelChange","ngModel"],["for","object-order",1,"convert-label","h-100","w-50","ps-2","d-flex","align-items-center"],["id","object-order",1,"convert-control","h-100","w-50","ps-2",3,"ngModelChange","change","ngModel"],["value","-1","selected",""],[1,"w-100","d-flex","gap-2"],["type","button",1,"btn","btn-primary","text-white","w-50",3,"click"],["for","object-caption",1,"convert-label","h-100","w-50","ps-2","d-flex","align-items-center"],["id","object-caption","type","text","disabled","",1,"convert-control","h-100","w-50","ps-2",3,"ngModelChange","ngModel"],["for","object-width",1,"convert-label","h-100","w-50","ps-2","d-flex","align-items-center"],["id","object-width",1,"convert-control","h-100","w-50","ps-2",3,"ngModelChange","change","ngModel"]],template:function(i,t){i&1&&(C(0,"div",0)(1,"div",1)(2,"h2",2),T(3,"Converter Viewer"),_()(),C(4,"div",3)(5,"select",4),K("ngModelChange",function(n){return q(t.selectedObject,n)||(t.selectedObject=n),n}),N("change",function(){return t.onSelectedObjectChange()}),C(6,"option",5),T(7,"Select an object to style"),_(),R(8,tn,3,2,"ng-container",6),_()(),R(9,an,24,7,"ng-container",7),_()),i&2&&(v(5),M("compareWith",t.selectedObjectCompareFn),z("ngModel",t.selectedObject),v(),M("value",null),v(2),M("ngForOf",t.objects),v(),M("ngIf",t.selectedObject))},dependencies:[Je,qe,Ke,_t,ft,yt,Ce,Fe,dt,Be],styles:["#converter-container[_ngcontent-%COMP%]{height:100vh;width:280px;position:fixed;left:280px;top:0;display:flex;flex-direction:column;align-items:center;border-left:2px solid #535353c2}#converter-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;color:gray;font-weight:700}#converter-container[_ngcontent-%COMP%]   #obj-selection-container[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]{background-color:transparent;color:#e5e5e5;border-color:#d3d3d366}#converter-container[_ngcontent-%COMP%]   #obj-selection-container[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]:focus{color:#fff}#converter-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.convert-item[_ngcontent-%COMP%]{-webkit-backdrop-filter:contrast(110%);backdrop-filter:contrast(110%);height:2.3rem;display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:space-between;align-items:center;border:1px solid #d3d3d366}#converter-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.convert-item[_ngcontent-%COMP%]   .convert-label[_ngcontent-%COMP%]{color:#8e8e8e}#converter-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.convert-item[_ngcontent-%COMP%]   .convert-control[_ngcontent-%COMP%]{background-color:#3b3b3b;color:#e5e5e5;border:none}#converter-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.convert-item[_ngcontent-%COMP%]   .convert-control[_ngcontent-%COMP%]:not(:disabled):focus{color:#fff;outline:1px solid #d3d3d3de}#converter-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.convert-item[_ngcontent-%COMP%]   .convert-control[_ngcontent-%COMP%]:disabled{background-color:transparent;color:#8e8e8e}"]})};var vt=class s{_converterComponent;_files;_modifiedFiles;files$;modifiedFiles$;constructor(){this._files=new W,this._modifiedFiles=new W,this.files$=new U,this.modifiedFiles$=new U}get files(){return this._files}set files(e){this._files=e}get modifiedFiles(){return this._modifiedFiles}set modifiedFiles(e){this._modifiedFiles=e}getFileByName(e,i="original"){let t=i==="original"?this._files:this._modifiedFiles,r=new D,n=e.split(".").slice(0,-1).join("");return!t[n]||(r=b({},t[n]),Object.keys(r).forEach(d=>{d!==e&&delete r[d]}),!Object.keys(r).length)?null:r}executeFileAction(e,i){return E(this,null,function*(){switch(i){case"convert":let t=yield this.convert(e);Object.keys(t).forEach(n=>{this._modifiedFiles[n]&&(this._modifiedFiles[n]={}),this._modifiedFiles[n]=t[n]});break;case"download":let r=new W;Object.keys(this._modifiedFiles).filter(n=>Object.keys(e).includes(n)).forEach(n=>{r[n]||(r[n]={}),r[n]=this._modifiedFiles[n]}),this.downloadFileGroup(r);break;default:break}})}convert(e){return E(this,null,function*(){let i=e[Object.keys(e)[0]],t=Object.keys(i).filter(y=>y.split(".").slice(-1).join("")==="pas")[0],r=Object.keys(i).filter(y=>y.split(".").slice(-1).join("")==="dfm")[0],n=new D([{name:t,content:i[t].content}]),d=new D([{name:r,content:i[r].content}]),c=new D,u=new D,a=Object.values(n)[0].content,o=Object.values(d)[0].content,l=this.pasToJs(a),h=this.dfmToJs(o),p=h[Object.keys(h)[0]]._objectClass;return this.applyStyles(h,l),this.addHeader(h,l),this.addButtons(h,l,p),this.addTabsButtons(h,l),c=new D([{name:Object.keys(n)[0],content:this.jsToPAS(l)}]),u=new D([{name:Object.keys(d)[0],content:this.jsToDfm(h)}]),new W([c,u])})}dfmToJs(e){let i=e.trim().split(`
`).map((c,u)=>" ".repeat((2-String(c).search(/\S/)%2)%2)+String(c));i[i.length-1]=i[i.length-1].trim();let t=[],r={},n={active:!1,type:"",level:null,key:"",key1:""},d=[];i.map(c=>{let u=c.search(/\S/);d.filter(a=>a.i1===u).length||d.push({i1:u,i2:d.reverse().map((a,o)=>u<a.i1?o+1:null).filter(a=>a)[0]||d.length}),d.sort()});for(let[c,u]of i.entries()){let a=d.filter(l=>l.i1===u.search(/\S/))[0].i2,o=String(u.trim());if(n.active){n.level&&(n.type==="object"?t[n.level][n.key][n.key1]=String(t[n.level][n.key][n.key1]).concat(`
`," ".repeat(Math.abs((a-1)*2)),o):(n.type==="string"||n.type==="items")&&(t[n.level][n.key]=String(t[n.level][n.key]).concat(`
`," ".repeat(Math.abs((a-1)*2)),o))),(n.type==="object"&&(String(o).endsWith("}")||String(o).endsWith(")"))||n.type==="string"&&!String(o).endsWith("+")||n.type==="items"&&String(o).endsWith("end>"))&&(n.active=!1,n.level=null,n.key="",n.key1="");continue}else if(new RegExp("^object\\s\\w+:\\s\\w+").test(o)){let l=String(o).match(new RegExp("object\\s(\\w+)"))?.[1];if(!l)continue;let h={};a>0?t[a-1][l]=h:r[l]=h,t[a]=h,t[a]._objectClass=String(o).match(new RegExp(`(?<=${l}: ).*`))?.[0]}else if(new RegExp("^\\w+\\s=\\s").test(o)){let l=String(o).match(new RegExp("(\\w+)"))?.[1];if(!l)continue;t[a-1][l]=String(o).match(new RegExp(`(?<=${l} = ).*`))?.[0],t[a-1][l]==="<"&&(n.active=!0,n.type="items",n.level=a-1,n.key=l,n.key1="")}else if(new RegExp("^\\w+\\.\\w+\\s=\\s").test(o)){let l={},h=String(o).match(new RegExp("(\\w+)"))?.[1];if(!h)continue;t[a-1][h]||(t[a-1][h]=l);let p=String(o).match(new RegExp(`${h}\\.(\\w+)`))?.[1];if(!p)continue;t[a-1][h][p]=String(o).match(new RegExp(`(?<=${h}\\.${p} = ).*`))?.[0],(String(o).match(new RegExp(`(?<=${h}\\.${p} = )\\{`))||String(o).match(new RegExp(`(?<=${h}\\.${p} = )\\(`)))&&(n.active=!0,n.type="object",n.level=a-1,n.key=h,n.key1=p)}else if(!new RegExp("end").test(o)&&new RegExp("^\\w+\\s=").test(o)){let l=String(o).match(new RegExp("\\w+"))?.[0];if(!l)continue;t[a-1][l]="",n.active=!0,n.type="string",n.level=a-1,n.key=l,n.key1=""}}return r}jsToDfm(e){let i=n=>{let d=Object.entries(n).sort((u,a)=>{let o=u[1]?._order!==void 0?Number(u[1]?._order):Number.MAX_SAFE_INTEGER,l=a[1]?._order!==void 0?Number(a[1]?._order):Number.MAX_SAFE_INTEGER;return o-l}),c={};for(let[u,a]of d)c[u]=typeof a=="object"&&a!==null&&a._objectClass?i(a):a;return c},t=(n,d)=>{d||(d=0);let c=[],u=Object.keys(n),a=u.length-1;for(let o in n)if(n[o]!==null){if(typeof n[o]=="object"){if(n[o]._objectClass)c.push(`${" ".repeat(d*2)}object ${o}: ${n[o]._objectClass}`),c.push(...t(n[o],d+1));else for(let l in n[o]){if(!n[o][l])continue;let h=d*2-(String(n[o][l]).split(`
`)?.[1]?.search(/\S/)||d*2)+2,p=String(n[o][l]).split(`
`).map((y,g)=>g>0&&h>0?" ".repeat(h)+y:y).join(`
`);c.push(`${" ".repeat(d*2)}${o}.${l} = ${p}`)}u.indexOf(o)===a&&(d--,d>=0&&c.push(`${" ".repeat(d*2)}end`))}else if(o!=="_objectClass"&&o!=="_order"&&n[o]){let l=d*2-(String(n[o]).split(`
`)?.[1]?.search(/\S/)||d*2)+2,h=String(n[o]).split(`
`).map((p,y)=>y>0&&l>0?" ".repeat(l)+p:p).join(`
`);c.push(`${" ".repeat(d*2)}${o} = ${h}`),u.indexOf(o)===a&&(d>0&&d--,c.push(`${" ".repeat(d*2)}end`))}}return c};return(n=>{let d=[],c=[];n.map(o=>{let l=o.search(/\S/);c.filter(h=>h.i1===l).length||c.push({i1:l,i2:c.reverse().map((h,p)=>l<h.i1?p+1:null).filter(h=>h)[0]||c.length}),c.sort()});let u=(o,l=0)=>{for(let[h,p]of o.entries()){let y=c.filter(m=>m.i1===p.search(/\S/))[0].i2,g=!String(p).trim().match(new RegExp("\\bobject \\w+: \\w+"))&&String(p).trim()!=="end",f=y===l;if(y===l-1)break;g&&f&&d.push(p)}},a=(o,l=0)=>{u(o,l);for(let[h,p]of o.entries()){let y=c.filter(m=>m.i1===p.search(/\S/))[0].i2,g=!!String(p).trim().match(new RegExp("\\bobject \\w+: \\w+")),f=y===l;if(y===l-1)break;g&&f&&(d.push(p),a(o.slice(h+1),l+1),d.push(`${" ".repeat(l*2)}end`))}};return a(n),d})(t(i(e),0)).join(`
`)}pasToJs(e){let i={};return i[String(e).match(new RegExp("unit\\s(\\w+)"))?.[1]||""]=`${e}`,i}jsToPAS(e){let i=Object.keys(e)?.[0];return e[i]}pasAddObject(e,i,t){let r=o=>{let l=[];o.forEach(y=>{let g=y.search(/\S/);l.filter(f=>f.i1===g).length||l.push({i1:g,i2:l.reverse().map((f,m)=>g<f.i1?m+1:null).filter(f=>f)[0]||l.length}),l.sort()});let h=!1,p=null;for(let[y,g]of o.entries()){let f=g.trim(),m=l.filter(S=>S.i1===g.search(/\S/))[0].i2;if(h&&m!==p+1)return h=!1,y-1;if(f.match("\\b\\w+\\s=\\s\\w+(\\w+)")&&(h=!0,p=m),h&&f.match(new RegExp("procedure\\s")))return y-1}return-1},n=Object.keys(e)[0],d=String(e[n]).trim().split(`
`),c=r(d);if(d.findIndex(o=>o.trim()===`${t}: ${i};`)>-1)return!1;let u=String(d[c]).match(new RegExp("\\s*"))?.[0],a=new Array;return a=a.concat(d.slice(0,c+1)),a.push(`${u}${t}: ${i};`),a=a.concat(d.slice(c+1,d.length)),d=a,e[n]=a.join(`
`),!0}pasRemoveObject(e,i,t){let r=Object.keys(e)[0],n=String(e[r]).trim().split(`
`),d=new Array;i?d=d.concat(n.filter(c=>!c.trim().match(`\\b${t}: ${i};`))):d=d.concat(n.filter(c=>!c.trim().match(`\\b${t}: \\w+;`))),n=d,e[r]=d.join(`
`)}pasAddMethod(e,i,t,r,n){let d=g=>{for(let f of g){let m=f.trim();if(m.match("\\b\\w+\\s=\\s\\w+(\\w+)"))return m.match("\\b\\w+")?.[0]||""}return""},c=g=>{let f=!1,m=null;for(let[S,A]of g.entries()){let $=A.trim(),H=h.filter(P=>P.i1===A.search(/\S/))[0].i2;if(f&&H!==m+1)return f=!1,S-1;if($.match("\\b\\w+\\s=\\s\\w+(\\w+)")&&(f=!0,m=H),f&&$.match(new RegExp("procedure\\s")))return S-1}return-1},u=(g,f)=>{let m=!1;for(let[S,A]of g.entries()){let $=A.trim(),H=h.filter(P=>P.i1===A.search(/\S/))[0].i2;if($.match(new RegExp(`${i} ${f}.${t}`))&&(m=!0),m){let P=$.match(new RegExp("end;")),le=String(g[S+1]).trim()==="",Pe=String(g[S+2]).trim().includes("end."),Ct=String(g[S+2]).trim().includes("procedure")||String(g[S+2]).trim().includes("function");if(P&&le&&(Pe||Ct))return S}}return-1},a=Object.keys(e)[0],o=String(e[a]).trim().split(`
`),l=d(o),h=[];o.forEach(g=>{let f=g.search(/\S/);h.filter(m=>m.i1===f).length||h.push({i1:f,i2:h.reverse().map((m,S)=>f<m.i1?S+1:null).filter(m=>m)[0]||h.length}),h.sort()});let p=new Array,y=String(e[a]).includes(`${i} ${t}`);if(!y){let g=c(o),f=String(o[g]).match(new RegExp("\\s*"))?.[0]||"";p=new Array,p=p.concat(o.slice(0,g+1)),p.push(`${f}${i} ${t}(${r});`),p=p.concat(o.slice(g+1,o.length)),o=p}if(y){let g=u(o,l),f=String(o[o.length-1]).match(new RegExp("\\s*"))?.[0]||"";p=new Array,p=p.concat(o.slice(0,g)),p.push(`
${f}${" ".repeat(3)}${n.trim()}`),p=p.concat(o.slice(g,o.length)),o=p}else{let g=String(o[o.length-1]).match(new RegExp("\\s*"))?.[0]||"";p=new Array,p=p.concat(o.slice(0,o.length-1)),p.push(`${g}${i} ${l}.${t}(${r});`),p.push(`${g}begin`),p.push(`${g}${" ".repeat(3)}${n.trim()}`),p.push(`${g}end;
`),p=p.concat(o.slice(o.length-1,o.length)),o=p}e[a]=p.join(`
`)||e[a]}pasRemoveMethod(e,i,t){}extractObjectByClass(e,i){let t=[];e._objectClass===i&&t.push(e);for(let r in e)typeof e[r]=="object"&&e[r]!==null&&(t=t.concat(this.extractObjectByClass(e[r],i)));return t}applyStyles(e,i){for(let t in e)if(typeof e[t]=="object"&&e[t]!==null){if(!e[t]._objectClass)continue;let r=e[t]._objectClass;switch(this.applyStyles(e[t],i),r){case e[Object.keys(e)[0]]._objectClass:e[t].Align="alNone",e[t].AutoSize="False",e[t].BorderStyle="bsNone",e[t].BorderWidth="0",e[t].ClientHeight=null,e[t].ClientWidth=null,e[t].Ctl3D="False",e[t].Font={},e[t].Font.Charset="ANSI_CHARSET",e[t].Font.Color="clBlack",e[t].Font.Height=null,e[t].Font.Size="9",e[t].Font.Name="'Segoe UI'",e[t].Font.Style="[]",e[t].Left="400",e[t].Position="poMainFormCenter",e[t].Top="200",e[t].Width="910",e[t].Height="600",e[t].ParentFont="False",e[t].WindowState="wsMaximized",e[t].TextHeight="15";break;case"TLabel":case"TDBText":case"TRadioButton":case"TCheckBox":case"TDBCheckBox":(r==="TLabel"||r==="TDBText")&&(e[t].Alignment="taLeftJustify",e[t].AutoSize="False"),e[t].Font={},e[t].Font.Charset="ANSI_CHARSET",e[t].Font.Color="clBlack",e[t].Font.Height=null,e[t].Font.Size="9",e[t].Font.Name="'Segoe UI'",e[t].Font.Style="[fsBold]",e[t].Height="15",e[t].ParentFont="False";break;case"TEdit":case"TDBEdit":case"TMSDBEditNum":case"TMSDateEdit":case"TMSDBFind":case"TMSEdit":case"TMSEditFind":case"TMSEditSel":case"TMaskEdit":case"TComboBox":case"TDBMemo":r==="TMSDateEdit"&&(e[t].Alignment="taCenter"),(r==="TMSDBEditNum"||r==="TMSDBFind"||r==="TMSEditFind"||r==="TMSEditSel"||r==="TDBMemo")&&(e[t].Alignment="taLeftJustify"),r!=="TComboBox"&&r!=="TDBMemo"&&(e[t].AutoSize="False"),e[t].BevelEdges="[beLeft,beTop,beRight,beBottom]",e[t].BevelInner="bvSpace",e[t].BevelKind="bkFlat",e[t].BevelOuter="bvRaised",r!=="TComboBox"&&(e[t].BorderStyle="bsNone"),r!=="TMSDateEdit"&&(e[t].Ctl3D="True"),e[t].Font={},e[t].Font.Charset="ANSI_CHARSET",e[t].Font.Color="clBlack",e[t].Font.Height=null,e[t].Font.Size="9",e[t].Font.Name="'Segoe UI'",e[t].Font.Style="[]",e[t].Height="23",r!=="TMSDateEdit"&&(e[t].ParentFont="False"),(r==="TMSDBFind"||r==="TMSEditFind"||r==="TMSEditSel")&&(e[t].LabelShape="True",r==="TMSDBFind"&&(e[t].LabelSpacing="5",e[t].LabelWidth="250"),r==="TMSEditFind"&&(e[t].DisplayWidth="250"));break;case"TDBGrid":case"TMSDBGrid":case"TStringGrid":e[t].BorderStyle="bsNone",e[t].Color="clWindow",e[t].Ctl3D="False",e[t].FixedColor="clBtnFace",e[t].ParentColor="False",e[t].ParentCtl3D="False",e[t].ParentFont="False",e[t].ParentShowHint="True",e[t].Font={},e[t].Font.Charset="ANSI_CHARSET",e[t].Font.Color="8404992",e[t].Font.Height=null,e[t].Font.Size="9",e[t].Font.Name="'Segoe UI'",e[t].Font.Style="[fsBold]",e[t].TitleFont={},e[t].TitleFont.Charset="ANSI_CHARSET",e[t].TitleFont.Color="8404992",e[t].TitleFont.Height="-11",e[t].TitleFont.Size="9",e[t].TitleFont.Name="'Segoe UI'",e[t].TitleFont.Style="[fsBold]",r!=="TStringGrid"&&(e[t].Options="[dgEditing, dgTitles, dgIndicator, dgColumnResize, dgTabs, dgAlwaysShowSelection, dgConfirmDelete, dgCancelOnExit]"),e[t].OnDrawColumnCell=`${t}DrawColumnCell`,e[t].OnMouseUp=`${t}MouseUp`,e[t].OnTitleClick=`${t}TitleClick`,this.pasAddMethod(i,"procedure",`${t}DrawColumnCell`,"Sender: TObject; const Rect: TRect; DataCol: Integer; Column: TColumn; State: TGridDrawState",`if Odd(${t}.datasource.dataset.recno) then
                      ${t}.canvas.brush.color := $00DADADA
                    else
                      ${t}.canvas.brush.color := clwhite;
              
                    if (gdSelected in State) then
                    begin
                      ${t}.canvas.brush.color := $0084632B;
                      ${t}.canvas.font.color := clwhite;
                      ${t}.canvas.font.style := [fsBold];
                    end;
              
                    ${t}.canvas.FillRect(Rect);
                    ${t}.Defaultdrawcolumncell( Rect, datacol, Column, State );
              
                    ${t}.canvas.textrect( rect, rect.left + 8, Rect.top+8, Column.field.displaytext );`),this.pasAddMethod(i,"procedure",`${t}MouseUp`,"Sender: TObject; Button: TMouseButton; Shift: TShiftState; X, Y: Integer",`TDBGridPad(${t}).defaultRowHeight := 30;
                    TDBGridPad(${t}).clientHeight     := (30 * TDBGridPad(${t}).rowcount) + 30;`),this.pasAddMethod(i,"procedure",`${t}TitleClick`,"Column: TColumn",`TDBGridPad(${t}).defaultRowHeight := 30;
                    TDBGridPad(${t}).clientHeight     := (30 * TDBGridPad(${t}).rowcount) + 30;`);break;case"TPanel":e[t].AutoSize="False",e[t].BevelInner="bvNone",e[t].BevelOuter="bvNone",e[t].BorderStyle="bsNone",e[t].Color="clWhite",e[t].Ctl3D="False",e[t].Font={},e[t].Font.Charset="ANSI_CHARSET",e[t].Font.Color="clBlack",e[t].Font.Height=null,e[t].Font.Size="9",e[t].Font.Name="'Segoe UI'",e[t].Font.Style="[]",e[t].ParentFont="False";break;case"TGroupBox":e[t].Caption=`'   ${String(e[t].Caption).split("'").join("").trim()}   '`,e[t].Color="clWhite",e[t].Ctl3D="True",e[t].Font={},e[t].Font.Charset="ANSI_CHARSET",e[t].Font.Color="clBlack",e[t].Font.Height=null,e[t].Font.Size="9",e[t].Font.Name="'Segoe UI'",e[t].Font.Style="[fsBold]",e[t].ParentFont="False",e[t].Left="0",e[t].Width=`${e.Width}`;break;default:break}}}addHeader(e,i){let t=Object.keys(e)[0],r="PanelTitle",n="LabelTitle";this.pasAddObject(i,"TPanel",r),this.pasAddObject(i,"TLabel",n),e[t][r]={},e[t][r]._objectClass="TPanel",e[t][r]._order="0",e[t][r].Left="0",e[t][r].Top="0",e[t][r].Width="894",e[t][r].Height="32",e[t][r].Align="alTop",e[t][r].Alignment="taLeftJustify",e[t][r].AutoSize="False",e[t][r].BevelOuter="bvNone",e[t][r].Color="6766380",e[t][r].Font={},e[t][r].Font.Charset="ANSI_CHARSET",e[t][r].Font.Color="clWhite",e[t][r].Font.Height=null,e[t][r].Font.Size="10",e[t][r].Font.Name="'Segoe UI'",e[t][r].Font.Style="[fsBold]",e[t][r].ParentFont="False",e[t][r].TabOrder="2",e[t][r][n]={},e[t][r][n]._objectClass="TLabel",e[t][r][n].Left="40",e[t][r][n].Top="7",e[t][r][n].Width=`${((e[t].Caption.length-2)*10).toFixed()}`,e[t][r][n].Height="17",e[t][r][n].Align="alCustom",e[t][r][n].AutoSize="False",e[t][r][n].Caption=`${e[t].Caption}`,e[t][r][n].Font={},e[t][r][n].Font.Charset="ANSI_CHARSET",e[t][r][n].Font.Color="clWhite",e[t][r][n].Font.Height=null,e[t][r][n].Font.Size="10",e[t][r][n].Font.Name="'Segoe UI'",e[t][r][n].Font.Style="[fsBold]",e[t][r][n].ParentFont="False"}addButtons(e,i,t,r){for(let n in e)if(typeof e[n]=="object"&&e[n]!==null){if(!e[n]._objectClass)continue;if(this.addButtons(e[n],i,t,e._objectClass),["TButton","TBitBtn","TDBSpeedButton","TSpeedButton","TMSButton"].includes(String(e[n]._objectClass))&&e._objectClass==="TPanel"){let d=!Object.keys(e).some(c=>e[c]._objectClass&&!["TButton","TBitBtn","TDBSpeedButton","TSpeedButton","TMSButton","TPanel"].includes(e[c]._objectClass));if(d&&(r===t?(e._order="Infinity",e.Align="alBottom"):e.Align="alTop",e.Height="39",e.BevelOuter="bvNone",e.Color="15132390"),!this.pasAddObject(i,"TPanel",`Panel${n}`))continue;e[`Panel${n}`]={},e[`Panel${n}`]._objectClass="TPanel",e[`Panel${n}`].AutoSize="False",e[`Panel${n}`].Left="40",e[`Panel${n}`].Top="6",e[`Panel${n}`].Width=`${((String(e[n].Caption).length-2)*10+20).toFixed()}`,e[`Panel${n}`].Height="28",e[`Panel${n}`].BevelOuter="bvNone",e[`Panel${n}`].Color=d?"clWhite":"15132390",e[`Panel${n}`].Cursor="crHandPoint",e[`Panel${n}`].Font={},e[`Panel${n}`].Font.Charset="ANSI_CHARSET",e[`Panel${n}`].Font.Color="5789784",e[`Panel${n}`].Font.Height=null,e[`Panel${n}`].Font.Size="10",e[`Panel${n}`].Font.Name="'Segoe UI'",e[`Panel${n}`].Font.Style="[fsBold]",e[`Panel${n}`].ParentFont="False",e[`Panel${n}`].TabStop="True",this.pasRemoveObject(i,e[n]._objectClass,n),this.pasAddObject(i,"TSpeedButton",n),e[`Panel${n}`][n]={},e[`Panel${n}`][n]._objectClass="TSpeedButton",e[`Panel${n}`][n].Left="-3",e[`Panel${n}`][n].Top="-3",e[`Panel${n}`][n].Width=`${((String(e[n].Caption).length-2)*10+25).toFixed()}`,e[`Panel${n}`][n].Height="32",e[`Panel${n}`][n].Caption=`${e[n].Caption}`,e[`Panel${n}`][n].Cursor="crHandPoint",e[`Panel${n}`][n].Enabled=`${e[n].Enabled}`,e[`Panel${n}`][n].Flat="True",e[`Panel${n}`][n].Font={},e[`Panel${n}`][n].Font.Charset="ANSI_CHARSET",e[`Panel${n}`][n].Font.Color="5789784",e[`Panel${n}`][n].Font.Height=null,e[`Panel${n}`][n].Font.Size="10",e[`Panel${n}`][n].Font.Name="'Segoe UI'",e[`Panel${n}`][n].Font.Style="[fsBold]",e[`Panel${n}`][n].ParentFont="False",e[`Panel${n}`][n].Visible=`${e[n].Visible}`,e[`Panel${n}`][n].OnClick=`${e[n].OnClick}`,delete e[n]}}}addTabsButtons(e,i){for(let t in e)if(typeof e[t]=="object"&&e[t]!==null){if(!e[t]._objectClass||(this.addTabsButtons(e[t],i),String(e[t]._objectClass)!=="TPageControl"))continue;let r=Object.keys(e[t]).filter(n=>e[t][n]._objectClass&&e[t][n]._objectClass==="TTabSheet").sort((n,d)=>(e[t][n].ImageIndex||0)-(e[t][d].ImageIndex||0));if(!r.length)continue;this.pasAddObject(i,"TPanel",`PnlTabs${t}`),e[`PnlTabs${t}`]={},e[`PnlTabs${t}`]._objectClass="TPanel",e[`PnlTabs${t}`]._order=1/0,e[`PnlTabs${t}`].AutoSize="False",e[`PnlTabs${t}`].Align="alCustom",e[`PnlTabs${t}`].Top=`${e[t].Top}`,e[`PnlTabs${t}`].Left="0",e[`PnlTabs${t}`].Height="30",e[`PnlTabs${t}`].Width="894",e[`PnlTabs${t}`].BevelOuter="bvNone",e[`PnlTabs${t}`].Color="clWhite",e[`PnlTabs${t}`].Font={},e[`PnlTabs${t}`].Font.Charset="ANSI_CHARSET",e[`PnlTabs${t}`].Font.Color="clWhite",e[`PnlTabs${t}`].Font.Height=null,e[`PnlTabs${t}`].Font.Size="10",e[`PnlTabs${t}`].Font.Name="'Segoe UI'",e[`PnlTabs${t}`].Font.Style="[fsBold]",e[`PnlTabs${t}`].ParentFont="False",e[`PnlTabs${t}`].TabStop="True",this.pasAddObject(i,"TPanel",`PnlTabs${t}Spacer1`),e[`PnlTabs${t}Spacer1`]={},e[`PnlTabs${t}Spacer1`]._objectClass="TPanel",e[`PnlTabs${t}Spacer1`]._order="0",e[`PnlTabs${t}Spacer1`].AutoSize="False",e[`PnlTabs${t}Spacer1`].Align="alTop",e[`PnlTabs${t}Spacer1`].Top=`${e[t].Top}`,e[`PnlTabs${t}Spacer1`].Left="0",e[`PnlTabs${t}Spacer1`].Height="27",e[`PnlTabs${t}Spacer1`].Width="894",e[`PnlTabs${t}Spacer1`].BevelOuter="bvNone",e[`PnlTabs${t}Spacer1`].Color="clWhite",e[`PnlTabs${t}Spacer1`].Font={},e[`PnlTabs${t}Spacer1`].Font.Charset="ANSI_CHARSET",e[`PnlTabs${t}Spacer1`].Font.Color="clWhite",e[`PnlTabs${t}Spacer1`].Font.Height=null,e[`PnlTabs${t}Spacer1`].Font.Size="10",e[`PnlTabs${t}Spacer1`].Font.Name="'Segoe UI'",e[`PnlTabs${t}Spacer1`].Font.Style="[fsBold]",e[`PnlTabs${t}Spacer1`].ParentFont="False",e[`PnlTabs${t}Spacer1`].TabStop="True",this.pasAddObject(i,"TPanel",`PnlTabs${t}Spacer2`),e[`PnlTabs${t}`][`PnlTabs${t}Spacer2`]={},e[`PnlTabs${t}`][`PnlTabs${t}Spacer2`]._objectClass="TPanel",e[`PnlTabs${t}`][`PnlTabs${t}Spacer2`]._order="0",e[`PnlTabs${t}`][`PnlTabs${t}Spacer2`].AutoSize="False",e[`PnlTabs${t}`][`PnlTabs${t}Spacer2`].Align="alLeft",e[`PnlTabs${t}`][`PnlTabs${t}Spacer2`].Top=`${e[t].Top}`,e[`PnlTabs${t}`][`PnlTabs${t}Spacer2`].Left="0",e[`PnlTabs${t}`][`PnlTabs${t}Spacer2`].Height="30",e[`PnlTabs${t}`][`PnlTabs${t}Spacer2`].Width="10",e[`PnlTabs${t}`][`PnlTabs${t}Spacer2`].BevelOuter="bvNone",e[`PnlTabs${t}`][`PnlTabs${t}Spacer2`].Color="clWhite",e[`PnlTabs${t}`][`PnlTabs${t}Spacer2`].Font={},e[`PnlTabs${t}`][`PnlTabs${t}Spacer2`].Font.Charset="ANSI_CHARSET",e[`PnlTabs${t}`][`PnlTabs${t}Spacer2`].Font.Color="clWhite",e[`PnlTabs${t}`][`PnlTabs${t}Spacer2`].Font.Height=null,e[`PnlTabs${t}`][`PnlTabs${t}Spacer2`].Font.Size="10",e[`PnlTabs${t}`][`PnlTabs${t}Spacer2`].Font.Name="'Segoe UI'",e[`PnlTabs${t}`][`PnlTabs${t}Spacer2`].Font.Style="[fsBold]",e[`PnlTabs${t}`][`PnlTabs${t}Spacer2`].ParentFont="False",e[`PnlTabs${t}`][`PnlTabs${t}Spacer2`].TabStop="True",r.forEach((n,d)=>{if(Object.keys(e[t][n]).findIndex(a=>e[t][n][a]&&e[t][n][a]._objectClass==="TScrollBox")<0){let a=Object.keys(e[t][n]).filter(l=>e[t][n][l]&&e[t][n][l]._objectClass),o=`ScrollBox_${n}`;this.pasAddObject(i,"TScrollBox",`${o}`),e[t][n][o]={},e[t][n][o]._objectClass="TScrollBox",e[t][n][o]._order="0",e[t][n][o].Left="0",e[t][n][o].Top="0",e[t][n][o].Align="alClient",e[t][n][o].AutoScroll="True",e[t][n][o].AutoSize="False",e[t][n][o].BevelEdges="[]",e[t][n][o].BevelInner="bvNone",e[t][n][o].BevelKind="bkNone",e[t][n][o].BevelOuter="bvNone",e[t][n][o].BevelWidth="1",e[t][n][o].BorderStyle="bsNone",e[t][n][o].Ctl3D="False",e[t][n][o].Color="clWhite",e[t][n][o].Font={},e[t][n][o].Font.Charset="ANSI_CHARSET",e[t][n][o].Font.Color="clWhite",e[t][n][o].Font.Height=null,e[t][n][o].Font.Size="9",e[t][n][o].Font.Name="'Segoe UI'",e[t][n][o].Font.Style="[]",e[t][n][o].ParentFont="False",e[t][n][o].TabStop="False",e[t][n][o].TabOrder="0",a.forEach(l=>{e[t][n][o][l]=e[t][n][l],delete e[t][n][l]})}this.pasAddObject(i,"TPanel",`Pnl${n}`),e[`PnlTabs${t}`][`Pnl${n}`]={},e[`PnlTabs${t}`][`Pnl${n}`]._objectClass="TPanel",e[`PnlTabs${t}`][`Pnl${n}`].AutoSize="False",e[`PnlTabs${t}`][`Pnl${n}`].Align="alLeft",e[`PnlTabs${t}`][`Pnl${n}`].Top="0",e[`PnlTabs${t}`][`Pnl${n}`].Left="0",e[`PnlTabs${t}`][`Pnl${n}`].Height="30",e[`PnlTabs${t}`][`Pnl${n}`].Width=`${((String(e[t][n].Caption).length-2)*7+5).toFixed()}`,e[`PnlTabs${t}`][`Pnl${n}`].BevelOuter="bvNone",e[`PnlTabs${t}`][`Pnl${n}`].BorderStyle="bsSingle",e[`PnlTabs${t}`][`Pnl${n}`].Color="clWhite",e[`PnlTabs${t}`][`Pnl${n}`].Font={},e[`PnlTabs${t}`][`Pnl${n}`].Font.Charset="ANSI_CHARSET",e[`PnlTabs${t}`][`Pnl${n}`].Font.Color="clWhite",e[`PnlTabs${t}`][`Pnl${n}`].Font.Height=null,e[`PnlTabs${t}`][`Pnl${n}`].Font.Size="10",e[`PnlTabs${t}`][`Pnl${n}`].Font.Name="'Segoe UI'",e[`PnlTabs${t}`][`Pnl${n}`].Font.Style="[fsBold]",e[`PnlTabs${t}`][`Pnl${n}`].ParentFont="False",e[`PnlTabs${t}`][`Pnl${n}`].TabStop="True",e[`PnlTabs${t}`][`Pnl${n}`].TabOrder=`${e[t][n].ImageIndex||0}`,this.pasAddObject(i,"TPanel",`PnlMarker${n}`),e[`PnlTabs${t}`][`Pnl${n}`][`PnlMarker${n}`]={},e[`PnlTabs${t}`][`Pnl${n}`][`PnlMarker${n}`]._objectClass="TPanel",e[`PnlTabs${t}`][`Pnl${n}`][`PnlMarker${n}`].AutoSize="False",e[`PnlTabs${t}`][`Pnl${n}`][`PnlMarker${n}`].Align="alTop",e[`PnlTabs${t}`][`Pnl${n}`][`PnlMarker${n}`].Top="0",e[`PnlTabs${t}`][`Pnl${n}`][`PnlMarker${n}`].Left="0",e[`PnlTabs${t}`][`Pnl${n}`][`PnlMarker${n}`].Height="3",e[`PnlTabs${t}`][`Pnl${n}`][`PnlMarker${n}`].Width=null,e[`PnlTabs${t}`][`Pnl${n}`][`PnlMarker${n}`].BevelOuter="bvNone",e[`PnlTabs${t}`][`Pnl${n}`][`PnlMarker${n}`].Color="clWhite",e[`PnlTabs${t}`][`Pnl${n}`][`PnlMarker${n}`].Font={},e[`PnlTabs${t}`][`Pnl${n}`][`PnlMarker${n}`].Font.Charset="ANSI_CHARSET",e[`PnlTabs${t}`][`Pnl${n}`][`PnlMarker${n}`].Font.Color="clWhite",e[`PnlTabs${t}`][`Pnl${n}`][`PnlMarker${n}`].Font.Height=null,e[`PnlTabs${t}`][`Pnl${n}`][`PnlMarker${n}`].Font.Size="10",e[`PnlTabs${t}`][`Pnl${n}`][`PnlMarker${n}`].Font.Name="'Segoe UI'",e[`PnlTabs${t}`][`Pnl${n}`][`PnlMarker${n}`].Font.Style="[fsBold]",e[`PnlTabs${t}`][`Pnl${n}`][`PnlMarker${n}`].ParentFont="False",e[`PnlTabs${t}`][`Pnl${n}`][`PnlMarker${n}`].TabStop="False",this.pasAddObject(i,"TSpeedButton",`Btn${n}`),e[`PnlTabs${t}`][`Pnl${n}`][`Btn${n}`]={},e[`PnlTabs${t}`][`Pnl${n}`][`Btn${n}`]._objectClass="TSpeedButton",e[`PnlTabs${t}`][`Pnl${n}`][`Btn${n}`].Top="-3",e[`PnlTabs${t}`][`Pnl${n}`][`Btn${n}`].Left="-3",e[`PnlTabs${t}`][`Pnl${n}`][`Btn${n}`].Height="32",e[`PnlTabs${t}`][`Pnl${n}`][`Btn${n}`].Width=`${((String(e[t][n].Caption).length-2)*7+10).toFixed()}`,e[`PnlTabs${t}`][`Pnl${n}`][`Btn${n}`].Caption=e[t][n].Caption,e[`PnlTabs${t}`][`Pnl${n}`][`Btn${n}`].Flat="True",e[`PnlTabs${t}`][`Pnl${n}`][`Btn${n}`].Font={},e[`PnlTabs${t}`][`Pnl${n}`][`Btn${n}`].Font.Charset="ANSI_CHARSET",e[`PnlTabs${t}`][`Pnl${n}`][`Btn${n}`].Font.Color="6766380",e[`PnlTabs${t}`][`Pnl${n}`][`Btn${n}`].Font.Height=null,e[`PnlTabs${t}`][`Pnl${n}`][`Btn${n}`].Font.Size="10",e[`PnlTabs${t}`][`Pnl${n}`][`Btn${n}`].Font.Name="'Segoe UI'",e[`PnlTabs${t}`][`Pnl${n}`][`Btn${n}`].Font.Style="[fsBold]",e[`PnlTabs${t}`][`Pnl${n}`][`Btn${n}`].ParentFont="False",e[`PnlTabs${t}`][`Pnl${n}`][`Btn${n}`].OnClick=`Btn${n}Click`,this.pasAddMethod(i,"procedure",`Btn${n}Click`,"Sender: TObject",`${t}.ActivePageIndex := ${e[t][n].ImageIndex||0};

                PnlMarker${n}.color := $00673F2C; // azul
                ${r.filter(a=>a!==n).map(a=>`PnlMarker${a}.color := $00E6E6E6; //cinza`).join(`
`)}`);let c=a=>{let o=[];for(let l in a)a[l]?._objectClass&&(a[l]._objectClass!=="TPageControl"&&(o=o.concat(c(a[l]))),a[l]._objectClass.includes("Grid")&&o.push(l));return o};c(e[t][n]).forEach(a=>{this.pasAddMethod(i,"procedure",`Btn${n}Click`,"Sender: TObject",`TDBGridPad(${a}).defaultRowHeight := 30;
              TDBGridPad(${a}).clientHeight     := (30 * TDBGridPad(${a}).rowcount) + 30;
              `)})}),this.pasAddMethod(i,"procedure","FormShow","Sender: TObject",`
          ${t}.ActivePageIndex := 0;
          ${r.map((n,d)=>`${t}.pages[${d}].TabVisible := false;`).join(`
`)}
          Btn${r[0]}Click(Sender);
          `)}}semiAutoConversion(e){return E(this,null,function*(){yield this.semiAutoFieldsAndLabels(e),yield this.semiAutoButtons(e)})}semiAutoFieldsAndLabels(e){return E(this,null,function*(){let i=(u,a)=>Object.keys(u)?.filter(l=>u[l]._objectClass&&(r(u[l]._objectClass)&&r(a)||n(u[l]._objectClass)&&n(a)))?.map((l,h)=>h)||[0],t=()=>[{name:"col-12",value:810},{name:"col-6",value:400},{name:"col-4",value:263},{name:"col-3",value:195},{name:"col-2",value:126}],r=u=>["TLabel"].includes(u),n=u=>["TEdit","TMSEdit"].includes(u),d=u=>{let a=0,o=1;return a=0,o=1,Object.keys(u).filter(l=>u[l]._objectClass&&u[l]._order&&r(u[l]._objectClass)).sort((l,h)=>u[l]._order-u[h]._order).forEach((l,h)=>{a+Number(u[l].Width)+30>=910&&(o++,a=0),u[l].Top=((o-1)*50+10).toFixed(),u[l].Left=40+a,a+=Number(u[l].Width)+10}),a=0,o=1,Object.keys(u).filter(l=>u[l]._objectClass&&u[l]._order&&n(u[l]._objectClass)).sort((l,h)=>u[l]._order-u[h]._order).forEach((l,h)=>{a+Number(u[l].Width)+30>=910&&(o++,a=0),u[l].Top=((o-1)*50+27).toFixed(),u[l].Left=40+a,a+=Number(u[l].Width)+10}),u},c=(u,a=null,o=null)=>E(this,null,function*(){let l=Object.keys(u).filter(h=>u[h]._objectClass&&(r(u[h]._objectClass)||n(u[h]._objectClass)));for(let h in u){if(!u[h]._objectClass||(yield c(u[h],h),!r(u[h]._objectClass)&&!n(u[h]._objectClass)||a==="PanelTitle"))continue;let p=document.querySelector("#parent-output"),y=document.querySelector("#class-output"),g=document.querySelector("#name-output"),f=document.querySelector("#caption-output"),m=document.querySelector("#order-input"),S=document.querySelector("#width-input"),A=document.querySelector("#ui-prev"),$=document.querySelector("#ui-next");if(!p||!y||!g||!f||!m||!S||!A||!$)break;p.innerHTML=a||"",y.innerHTML=u[h]._objectClass,g.innerHTML=h,f.innerHTML=u[h].Caption||"",m.innerHTML=i(u,u[h]._objectClass).map(P=>`<option value="${P}">${P}</option>`).join(`
`),S.innerHTML=t().map(P=>`<option value="${P.value}">${P.name}</option>`).join(`
`),S.value="400",m.focus();let H=yield new Promise((P,le)=>{$.addEventListener("click",function Pe(){$.removeEventListener("click",Pe),P("")})});u[h].Width=Number(S.value),u[h]._order=m.value,r(u[h]._objectClass)||(u[h].TabOrder=m.value),l.indexOf(h)===l.length-1&&d(u),p.innerHTML="",y.innerHTML="",g.innerHTML="",f.innerHTML="",m.value="-1",m.innerHTML='<option value="-1">-1</option>',S.value="-1",S.innerHTML='<option value="0">col-0</option>'}});yield c(e)})}semiAutoButtons(e){return E(this,null,function*(){let i=(c,u)=>Object.keys(c)?.filter(o=>c[o]._objectClass&&r(c[o])&&r(c[o]))?.map((o,l)=>l)||[0],t=c=>["TSpeedButton"].includes(c),r=c=>t(c[Object.keys(c).filter(u=>c[u]._objectClass)[0]]?._objectClass),n=c=>{let u=0,a=1;return u=0,a=1,Object.keys(c).filter(o=>c[o]._objectClass&&c[o]._order&&r(c[o])).sort((o,l)=>c[o]._order-c[l]._order).forEach((o,l)=>{u+Number(c[o].Width)+30>=910&&(a++,u=0),c[o].Top=((a-1)*28+6).toFixed(),c[o].Left=40+u,c[o]._order==="0"&&(c[o].Color="6766380",c[o].Font.Color="clWhite"),u+=Number(c[o].Width)+10}),c},d=(c,u,a)=>E(this,null,function*(){let o=Object.keys(c).filter(l=>c[l]._objectClass&&r(c[l]));for(let l in c){if(!c[l]._objectClass||(yield d(c[l],l),!r(c[l])))continue;let h=document.querySelector("#parent-output"),p=document.querySelector("#class-output"),y=document.querySelector("#name-output"),g=document.querySelector("#caption-output"),f=document.querySelector("#order-input"),m=document.querySelector("#width-input"),S=document.querySelector("#ui-prev"),A=document.querySelector("#ui-next");if(!h||!p||!y||!g||!f||!m||!S||!A)break;h.innerHTML=u||"",p.innerHTML=c[l]._objectClass,y.innerHTML=l,g.innerHTML=c[l].Caption||"",f.innerHTML=i(c,c[l]._objectClass).map(H=>`<option value="${H}">${H}</option>`).join(`
`),m.value="-1",m.innerHTML='<option value="0">col-0</option>',m.value="400",f.focus();let $=yield new Promise((H,P)=>{A.addEventListener("click",function le(){A.removeEventListener("click",le),H("")})});c[l]._order=f.value,c[l].TabOrder=f.value,o.indexOf(l)===o.length-1&&n(c),h.innerHTML="",p.innerHTML="",y.innerHTML="",g.innerHTML="",f.value="-1",f.innerHTML='<option value="-1">-1</option>',m.value="-1",m.innerHTML='<option value="0">col-0</option>'}});yield d(e)})}copyPasOutputToClipboard(){let e=document.querySelector("#pas-output");e&&this.copyToClipboard(e.value)}copyDfmOutputToClipboard(){let e=document.querySelector("#dfm-output");e&&this.copyToClipboard(e.value)}copyToClipboard(e){navigator.clipboard.writeText(e).then(i=>{}).catch(i=>{})}loading(e){let i=document.querySelector("#loading-container");i||(i=document.createElement("div"),i.id="loading-container",i.innerHTML='<span id="loader"></span>',document.body.appendChild(i)),e?i.style.display="":i.style.display="none"}toggleConverter(e,i){this._converterComponent&&(this._converterComponent.instance.dfm_js$.unsubscribe(),this._converterComponent.destroy()),this._converterComponent=e.createComponent(Te);let t=new W;Object.keys(this._modifiedFiles).filter(a=>Object.keys(i).includes(a)).forEach(a=>{t[a]||(t[a]={}),t[a]=this._modifiedFiles[a]});let r=t[Object.keys(t)[0]],n=Object.keys(r).filter(a=>a.split(".").slice(-1).join("")==="dfm")[0],d=new D([{name:n,content:r[n].content}]),c=Object.values(d)[0].content,u=this.dfmToJs(c);this._converterComponent.instance.dfm_js$.next(u),this._converterComponent.instance.dfm_js$.subscribe(a=>{Object.keys(this._modifiedFiles).filter(o=>Object.keys(i).includes(o)).forEach(o=>{this._modifiedFiles[o][Object.keys(this._modifiedFiles[o]).filter(l=>l.split(".").slice(-1).join("")==="dfm")[0]].content=this.jsToDfm(a)}),this.modifiedFiles$.next(this._modifiedFiles)})}downloadFileGroup(e){Object.keys(e).forEach(i=>{for(let t in e[i])if(Object.prototype.hasOwnProperty.call(e[i],t)){let r=new Blob([e[i][t].content],{type:"text/plain"}),n=window.URL.createObjectURL(r),d=document.createElement("a");d.href=n,d.download=`${t}`,document.body.appendChild(d),d.click(),document.body.removeChild(d),window.URL.revokeObjectURL(n)}})}static \u0275fac=function(i){return new(i||s)};static \u0275prov=be({token:s,factory:s.\u0275fac,providedIn:"root"})};export{W as a,vt as b};
